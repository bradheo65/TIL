# 싱글톤 패턴(Singleton Pattern)이란 무엇이며, 어떤 경우에 사용하나요?

디자인 패턴들 중 하나이며, 가장 개념적으로 간단한 패턴이다.

싱글턴 패턴이란, 단 하나의 유일한 객체를 만들기 위한 코드 패턴이다.
좀더 자세히 얘기하면, 메모리 절약을 위해, 인스턴스가 필요할 떄 똑같은 인스턴스를 새로 만들지 않고, 기존의 인스턴스를 가져와 활용하는 기법이다.

비슷한 역활을 하는 "전역 변수"도 있는데, 이 개념을 그대로 클래스에 대입한 것이 싱글턴 패턴이다.

## 사용하는 경우

객체가 리소를 많이 차지하는 역활을 하는 무거운 클래스일떄 사용하면 좋다.

예를 들어 데이터베이스 연결 모듈을 예를 들자면, 데이터베이스에서 접속하는 작업은 그 자체로 무거운 작업에 속하며, 한번만 객체를 생성하고, 돌려쓰면 되지 굳이 여러번 생성할 필요가 없기 떄문이다.

이밖에도 디스크 연결, 네트워크 통신, 캐시, 로그 기록 객체 등에 이용한다

이러한 객체들은 또 새로 만들어서 사용될 일도 없거니와 사용해도 리소스 낭비일 뿐이다.

결론적으로 유일한 것이 좋은 것을 싱글톤 객체로 만들면 좋다.

# Swift에서 싱글톤 패턴을 구현할 때 멀티스레드에 대해서 어떻게 고려해야 하나요?

> 별도로 작업하지 않아도 됩니다.
>
> 단, Swift에서는 static을 사용해 타입 프로퍼티로 인스터스를 생성하게 되면, 사용 시점에서 초기화 되는데, 이 말인 즉슨 싱글턴 인스턴스가 최초 생성되기 전까진 메모리에 올라가지 않고, Dispatch_once도 자동 적용이 된다고 합니다. 따라서 별다른 코드 없이도 인스턴스가 여러 개 생성되지 않는 Thread-Safe 하다라고 볼 수 있습니다.

Swift의 프로퍼티 공식문서 중 전역(global) 상수와 변수는 항상 lazy로 계산된다. static도 항상 전역(global)로 선언되기 떄문에 lazy로 계산된다.


Objective-C에서는 Singletion을 생성할 떄 dispatch_once를 이용해 단 한번만 불리게 하는 작업이 있었다.

Java나 다른 언어에서도 Signletion을 생성하는 것은 멀티 스레드 환경에서 Thread-Safe하지 않기 떄문인대, 정리하자면 여러 쓰레드가 만약 동시에 Signletion을 생성하면, 경우에 따라서 인스턴스가 2개, 3개 생성될 수 있었다.

그래서 Objective-C에서도 App이 실행되고 단 한번만 실행되도록 하기 위해 dispatch_once를 사용해서 만들었음.
